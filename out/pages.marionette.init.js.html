<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: pages.marionette.init.js</title>
    
    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">
    
    <h1 class="page-title">Source: pages.marionette.init.js</h1>
    
    


    
    <section>
        <article>
            <pre class="prettyprint source"><code>/*global $, _, SecondFunnel, broadcast*/
// SecondFunnel initializers.

/**
 * Given an instance of  Marionette Application, add initializers to it.
 * @param app
 */
function reInitialize(app) {
    "use strict";

    if (app === undefined) {
        return;
    }

    app.addInitializer(function () {
        // set its width to whatever it began with.
        app.options.initialWidth = $(window).width();
    });

    app.addInitializer(function () {
        if (app.option('debug', false) >= app.ALL) {
            $(document).ready(function () {
                // don't use getScript, firebug needs to know its src path
                // and getScript removes the tag so firebug doesn't know what to do
                var tag = document.createElement('script'),
                    firstScriptTag;
                tag.src = "https://getfirebug.com/firebug-lite.js";

                firstScriptTag = document.getElementsByTagName('script')[0];
                firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
                broadcast('firebugLoaded');
            });
        }
    });

    app.addInitializer(function () {
        try {
            var fa = new app.core.HeroAreaView();
            fa.render();
            broadcast('heroAreaRendered', fa);
        } catch (err) {
            // marionette throws an error if no hero templates are found or needed.
            // it is safe to ignore it.
            broadcast('heroAreaNotRendered');
        }
    });

    app.addInitializer(function () {
        if (window.console) {
            app.vent.on('log', function () {
                try {  // console.log is an object in IE...?
                    console.log.apply(console, arguments);
                } catch (e) {}
            });
            app.vent.on('warn', function () {
                try {
                    console.warn.apply(console, arguments);
                } catch (e) {}
            });
            app.vent.on('error', function () {
                try {
                    console.error.apply(console, arguments);
                } catch (e) {}
            });

            app.vent.on('beforeInit', function (details) {
                var pubDate;
                if (details && details.page && details.page.pubDate) {
                    pubDate = details.page.pubDate;
                }
                console.log(  // feature, not a bug
                    '____ ____ ____ ____ _  _ ___     ____ _  _ ' +
                    '_  _ _  _ ____ _    \n[__  |___ |    |  | |' +
                    '\\ | |  \\    |___ |  | |\\ | |\\ | |___ | ' +
                    '   \n___] |___ |___ |__| | \\| |__/    |   ' +
                    ' |__| | \\| | \\| |___ |___ \n' +
                    '           Published ' + pubDate);
            });
        }
    });

    app.addInitializer(function () {
        // Add our initializer, this allows us to pass a series of tiles
        // to be displayed immediately (and first) on the landing page.
        broadcast('beforeInit', app.options, app);

        $('.brand-label').text(app.option("store:displayName") ||
                               _.capitalize(app.option("store:name")) ||
                               'Brand Name');

        $(document).ajaxError(function (event, request, settings) {
            broadcast('ajaxError', settings.url, app);
        });

        app.discovery = new SecondFunnel.core.Discovery(app.options);
        broadcast('finished', app.options, app);
    });

    app.addInitializer(function () {
        // set its width to whatever it began with.
        app.options.initialWidth = $(window).width();
    });
}

// auto-initialise existing instance on script inclusion
reInitialize(window.SecondFunnel);</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Modules</h3><ul><li><a href="module-core.html">core</a></li><li><a href="module-intentRank.html">intentRank</a></li><li><a href="module-layoutEngine.html">layoutEngine</a></li><li><a href="module-sharing.html">sharing</a></li><li><a href="module-support.html">support</a></li><li><a href="module-tracker.html">tracker</a></li><li><a href="module-utils.html">utils</a></li><li><a href="module-viewport.html">viewport</a></li></ul><h3>Classes</h3><ul><li><a href="module-core-core.Discovery.html">Discovery</a></li><li><a href="module-core-core.HeroAreaView.html">HeroAreaView</a></li><li><a href="module-core-core.TileCollection.html">TileCollection</a></li><li><a href="module-core-core.TileView.html">TileView</a></li><li><a href="module-core-core.VideoTileView.html">VideoTileView</a></li><li><a href="sharing.FacebookSocialButton.html">FacebookSocialButton</a></li><li><a href="sharing.ShareOption.html">ShareOption</a></li><li><a href="sharing.SharePopup.html">SharePopup</a></li><li><a href="sharing.ShareSocialButton.html">ShareSocialButton</a></li><li><a href="sharing.SocialButton.html">SocialButton</a></li><li><a href="sharing.SocialButtons.html">SocialButtons</a></li><li><a href="sharing.TwitterSocialButton.html">TwitterSocialButton</a></li></ul><h3>Global</h3><ul><li><a href="global.html#_exists">_exists</a></li><li><a href="global.html#debugOp">debugOp</a></li><li><a href="global.html#option">option</a></li><li><a href="global.html#receive">receive</a></li><li><a href="global.html#reInitialize">reInitialize</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-dev</a> on Wed Sep 25 2013 18:03:33 GMT-0400 (EDT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
