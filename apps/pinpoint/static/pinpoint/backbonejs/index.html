<!DOCTYPE html>
<html lang="en">
    <head>
        <title>BackboneJS Gap Landing Page</title>
        <!-- CSS -->
        <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css" />
        <link rel="stylesheet" type="text/css" href="css/pages2.css" />
        <link rel="stylesheet" type="text/css" href="css/styles.css" />
        <!-- End CSS -->
        <meta name="viewport" content="width=device-width, initial-scale=1.0" ><!-- required by bootstrap -->
        <meta http-equiv="X-UA-Compatible" content="IE=edge"><!-- required by bootstrap, IE -->
    </head>

    <body>
        <header>
            <nav class="navbar navbar-static-top" role="navigation">
                <!-- collapsible -->
                <!-- div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="#">Brand Name</a>
                </div>

                <div class="collapse navbar-collapse navbar-ex1-collapse" -->

                <!-- non-collapsible -->
                <div class="container">
                    <ul class="nav navbar-nav"><!-- RHS: .navbar-right -->
                        <li><a class="navbar-brand" href="#">Brand Name</a></li>
                        <li class="active"><a href="#">Home</a></li>
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">More brands <b class="caret"></b></a>
                            <ul class="dropdown-menu">
                                <li><a href="#">Action</a></li>
                                <li><a href="#">Another action</a></li>
                                <li><a href="#">Something else here</a></li>
                                <li><a href="#">Separated link</a></li>
                                <li><a href="#">One more separated link</a></li>
                            </ul>
                        </li>
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Stay connected <b class="caret"></b></a>
                            <ul class="dropdown-menu">
                                <li><a href="#">Action</a></li>
                                <li><a href="#">Another action</a></li>
                                <li><a href="#">Something else here</a></li>
                                <li><a href="#">Separated link</a></li>
                                <li><a href="#">One more separated link</a></li>
                            </ul>
                        </li>
                        <li class="dropdown">
                          <a href="#" class="dropdown-toggle" data-toggle="dropdown">Categories <b class="caret"></b></a>
                          <ul class="dropdown-menu">
                            <li><a href="#" data-category="96">Back to Blue</a></li>
                            <li><a href="#" data-category="99">Samsung SSD</a></li>
                          </ul>
                    </ul>
                    <ul class="nav navbar-nav navbar-right">
                        <li><a href="#">Social buttons</a></li>
                    </ul>
                </div><!-- /.navbar-collapse -->
            </nav>
        </header>
        <div class="container"><!-- .container is bootstrap magic, and has a viewport-dependent width. -->
            <div class="visible-xs jumbotron"><!-- hero unit (mobile 1) -->
                <!-- configure hero images by overriding its background -->
            </div>
            <div class="visible-sm jumbotron"><!-- hero unit (mobile 2) -->
                <!-- configure hero images by overriding its background -->
            </div>
            <div class="visible-md visible-lg jumbotron"><!-- hero unit (desktop) -->
                <!-- configure hero images by overriding its background -->
            </div>
            <div id="discovery-area" class="discovery-area">
                <!-- paste pre-rendered tiles here (TODO... event handling for them) -->
            </div>
            <div class="loading"></div>
        </div>


        <!-- Templates -->
        <script type="text/template" id="product_tile_template">
            <div class="tap-indicator-target"></div>
            <img src="<%= image %>" alt="<%= caption %>" />
            <span class="type"><%= obj['content-type'] %></span>
            <div class="caption">
                <span><%= caption %></span>
            </div>
            <div class="social-buttons"></div>
        </script>
        <script type="text/template" id="youtube_tile_template">
            <div class="img-responsive thumbnail"
                 style="background-image: url('<%= obj.thumbnail || obj.image %>');">
              &nbsp;
              <img src="" alt="this img tag intentionally left blank" style="visibility:hidden"/>
            </div>
            <%= obj.caption || obj.name %>
            <div class="social-buttons"></div>
        </script>
        <script type="text/template" id="preview_container_template">
            <div class="mask"></div>
            <div class="tablecell">
                <div class="content">
                    <span class="close">&#x00D7;</span>
                    <div class="scrollable">
                        <div class="template target"></div>
                    </div>
                </div>
            </div>
        </script>
        <script type="text/template" id="tile_preview_template">
            <h2><span class="label label-info"><%= obj.template %>_preview_template</span> is missing.</h2>
            <p>You can define one in <code>index.html</code>.</p>
            <ul>
                <% for (i in obj) { %>
                    <li><b><%= i %></b>: <%= obj[i] %></li>
                <% } %>
            </ul>
        </script>
        <script type="text/template" id="tap_indicator_template">
            +
            <div>
                <%= SecondFunnel.option('tapIndicatorText', 'tap to see more') %>
            </div>
        </script>
        <script type="text/template" id="facebook_social_button_template">
            <div class='button facebook'>
                <img src="//s3-us-west-2.amazonaws.com/static-misc-secondfunnel/images/fb-like-0.png" alt="Like" class="placeholder" />
                <fb:like href="<%= url %>" width="48" layout="button_count"
                         show_faces="false"></fb:like>
            </div>
        </script>
        <script type="text/template" id="twitter_social_button_template">
            <% if (showCount) { %>
                <div class='button twitter' style='height: 13px; width: 77px;'>
                    <a href="https://twitter.com/share?url=<%= url %>"
                       class="twitter-share-button"
                       data-lang="en" data-height= "15">
                      Tweet
                    </a>
                </div>
            <% } else { %>
                <div class='button twitter'>
                    <a href="https://twitter.com/share?url=<%= url %>" target="_blank">
                        <img src="//elasticbeanstalk-us-east-1-056265713214.s3.amazonaws.com/pinpoint/images/twitterButton.png"/>
                    </a>
                </div>
            <% } %>
        </script>
        <script type="text/template" id="pinterest_social_button_template">
            <div class='button pinterest'>
                <a href="http://pinterest.com/pin/create/button/?url=<%= url %>&media=<%= image %>" target="_blank">
                    <img src="//elasticbeanstalk-us-east-1-056265713214.s3.amazonaws.com/pinpoint/images/pinpointButton.png"/>
                </a>
            </div>
        </script>
        <script type="text/template" id="reddit_social_button_template">
            <a href="http://www.reddit.com/submit" 
               onclick="window.location = 'http://www.reddit.com/submit?url=<%= url %>'; return false">
              <img src="http://www.reddit.com/static/spreddit7.gif"
                   alt="submit to reddit" 
                   border="0" /> 
            </a>
        </script>
        <script type="text/template" id="tumblr_social_button_template">
            <a href="http://www.tumblr.com/share/photo?source=<%= url %>&caption=<%= caption %>&click_thru=<%= url %>" target='_blank'>
                <img src="http://platform.tumblr.com/v1/share_1.png"/>
            </a>
        </script>
        <script type="text/template" id="share_social_button_template">
            <a href="">
                <img src=""
                     alt="Share this"
                     border="0" />
            </a>
        </script>
        <script type="text/template" id="share_popup_template">
            <div class="mask"></div>
            <div class="tablecell">
                <div class="content">
                    <span class="close">&#x00D7;</span>
                    <h2> Share This </h2>
                    <% _.each(obj.buttons, function(item, key) { %>
                        <a href="<%= item.url %>" target="_blank">
                            <div class="share">
                                <img src="<%= item.img %>" alt="<%= item.name %>" />
                                <span><%= item.text %></span>
                            </div>
                        </a>
                    <% }); %>
                </div>
            </div>
        </script>
        <script type="text/template" id="product_preview_template">
            <img src="<%= obj.image %>" alt=""/>
            <%= obj.price %>
            <div class="social-buttons"></div>
        </script>
        <script type="text/template" id="image_preview_template">
            <h4>
                <span class="label label-info"><%= obj.template %></span>
                <%= obj.caption || obj.title || obj.name %>
                <!-- in that order (it may still have none of those) -->
            </h4>
            <img src="<%= obj.image %>" alt=""/>
            <div class="social-buttons"></div>
        </script>

        <!-- store-specific templates -->
        <script type="text/template" id="gap_product_preview_template">
            <!-- any (store.name)_(type)_... templates will be used in place
                 of default templates if they exist. -->
            <div class='content-wrapper'>
                <div class='image-div'>
                    <div class='table'>
                        <div class='image'><img src='<%= obj.image %>'/></div>
                    </div>
                </div>
                <div class='info'>
                    <div class='title text'><%= obj.title %></div>
                    <div class='price text'><%= obj.price %></div>
                    <div class='description'>
                        <div class='desc-title'>Overview</div>
                        <ul>
                            <% var sentences = _.compact(obj.description.split('.')); %>
                            <% _.each(sentences, function(sentence) { %>
                                <li><%= $.trim(sentence) %></li>
                            <% }); %>
                        </ul>
                    </div>
                    <div>
                        <a class='tumblr' href='//www.tumblr.com/share/photo?source=<%= encodeURIComponent(obj.image) %>&caption=<%= encodeURIComponent(obj.title) %>&click_thru=<%= encodeURIComponent(obj.url) %>' target='_blank'>
                            <img src='http://platform.tumblr.com/v1/share_1.png'/>
                        </a>
                        <div class="social-buttons"></div>
                        <div class='spacer'></div>
                    </div>
                    <div class='gap-buttons'>
                        <a class='button find-store' href='http://www.gap.com/customerService/storeLocator.do' target='_blank'>
                            Find in Store
                        </a>
                        <a class='button in-store' href='<%= obj.url %>' target='_blank'>
                            Shop on Gap.com
                        </a>
                    </div>
                    <% if(obj.images.length >1) { %>
                    <div class='selector'>
                        <div class='images'>
                            <% _.each(obj.images, function(image) { %>
                            <img src='<%= image %>' />
                            <% }); %>
                        </div>
                    </div>
                    <% } %>
                </div>
            </div>
        </script>
        <script type="text/template" id="gap_instagram_preview_template">
            <!-- any (store.name)_(type)_... templates will be used in place
                 of default templates if they exist. -->
            <h1>GAP TEMPLATE WOOOOOOT!!</h1>
            <img src="<%= obj.image %>" alt=""/>
        </script>


        <!-- End Templates -->
        <!-- Javascript Files -->
        <script type="text/javascript">
            window.TEST_PAGE_DATA = {
                'debug': true,
                'base_url': "http://www.secondfunnel.com",
                'discoveryTarget': "#discovery-area",
                'discoveryItemSelector': ".tile",
                'store': {
                    'id': "38",
                    'name': "gap"
                },
                'page': {  // required
                    'id': 9001  // required
                },
                'campaign': 96,
                'categories': [
                    { 
                        'id': 96
                    },
                    {
                        'id': 97
                    },
                    {
                        'id': 98
                    },
                    {
                        'id': 99
                    }
                ],
                'columnWidth': function($element) {
                    return 240 + 15;
                },
                'events': undefined,  // page event bindings (optional)
                'socialButtons': [
                    "facebook",
                    "twitter",
                    "pinterest",
                    "tumblr",
                    "reddit",
                    "share"
                 ], // optional
                'shareSocialButtons': [
                    {
                        'name': "facebook",
                        'url': "https://www.facebook.com/sharer/share.php?u=<%= url %>",
                        'img': "//s3-us-west-2.amazonaws.com/static-misc-secondfunnel/images/FB-f-Logo__blue_29.png",
                        'text': "Share on Facebook"
                    },
                    {
                        'name': "twitter",
                        'url': "https://www.twitter.com/share?url=<%= url %>",
                        'img': "//abs.twimg.com/a/1377219190/images/resources/twitter-bird-light-bgs.png",
                        'text': "Share on Twitter"
                    }
                ],
                'imageTileWide': 0.25,
                'previewAnimationDuration': 0.1,
                'previewMobileAnimationDuration': 0,
                'masonryAnimationDuration': 0.4,
                'masonryMobileAnimationDuration': 0,
                'initialResults': [  // stuff that loads when page loads, even if IR is available
                    { 
                        'caption': "None",
                        'content-id': 562949953426705,
                        'content-type': "Instagram",
                        'db-id': 5393,
                        'image': "http://images.secondfunnel.com/store/gap/lifestyle/b127ff7bd36c348c8de82c8951f30ff1/master.gif",
                        'original-id': "tumblr_mra6qu7uh11s6ofheo1_500",
                        'template': "instagram",
                        'tile-id': 562949953426705
                    }
                ],
                'IRResultsCount': 10,
                'IRTimeout': 5000,
                'gaAccountNumber': undefined,  // but required

                // number of viewports worth of results to keep below the page.
                // 0 is not an acceptable value, but 0.0001 is. default is 1,
                // i.e. there will always be one page worth of results
                // underneath, no matter how fast you scroll.
                'prefetchHeight': 1,

                'backupResults': [
                    // stuff that loads when IR doesn't respond within PAGES_INFO.IRTimeout.
                    // it really should contain at least 10 products.
                ],
                'showCount': false
            };

            var _gaq = _gaq || [];
            _gaq.push(['_setAccount', window.TEST_PAGE_DATA.gaAccountNumber]);

            _gaq.push(['_setCustomVar',
                1,                               // slot id
                'StoreID',                       // name
                window.TEST_PAGE_DATA.store.id,  // value
                3                                // scope: page-level
            ]);

            _gaq.push(['_setCustomVar', 2, 'CampaignID',
                window.TEST_PAGE_DATA.campaign,  // <int>
                3
            ]);

            _gaq.push(['_trackPageview']);
        </script>
        <!-- Social -->
        <div id="fb-root"></div>
        <!-- End Social -->
        <script type="text/javascript" src="//www.youtube.com/iframe_api"></script>
        <script type="text/javascript" src="//assets.pinterest.com/js/pinit.js"></script>
        <script type="text/javascript" src="//connect.facebook.net/en_US/all.js"></script>
        <script type="text/javascript" src="//platform.twitter.com/widgets.js"></script>
        <script type="text/javascript" src="//google-analytics.com/ga.js"></script>
        <script type="text/javascript" src="js/respond.min.js"></script><!-- "as early after the css as possible" -->
        <script type="text/javascript" src="js/jquery.min.js"></script>
        <script type="text/javascript" src="js/json2.js"></script>
        <script type="text/javascript" src="js/underscore.js"></script>
        <script type="text/javascript" src="js/backbone.js"></script>
        <script type="text/javascript" src="js/backbone.marionette.min.js"></script>
        <script type="text/javascript" src="js/imagesloaded.pkgd.min.js"></script>
        <script type="text/javascript" src="js/jquery.masonry.pkgd.min.js"></script>
        <script type="text/javascript" src="js/bootstrap.min.js"></script>
        <script type="text/javascript" src="js/pages.marionette.js"></script>
        <script type="text/javascript" src="js/css3-mediaqueries.js"></script><!-- IE8 -->
        <script type="text/javascript">
            if (window.SecondFunnel) {
                // Start the SecondFunnel app
                SecondFunnel.start(SecondFunnel.options);
            }
        </script>
        <!-- End Javascript -->
    </body>
</html>
