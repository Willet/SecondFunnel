<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
    @@include('shared/campaign_head.html')
    @@include('shared/campaign_opengraph_tags.html')
    <!-- End Optimizer Tests -->
    <link rel="shortcut icon"
         href="http://images10.newegg.com/WebResource/Themes/2005/Nest/Newegg.ico" />
    <link rel="stylesheet"
          href="/static/light/lenovo/landingpage/default/styles/main.css"/>
    @@include('shared/campaign_respond.html')
    <!-- Add Optimizer Tests here -->
    <script type="text/javascript">
        window.TRACKING_PIXELS = {
            'A': {
                'view': 'http://9nl.us/ntyv',
                'click': 'http://9nl.us/in6g'
            }
        };
        window.ACTIVE_TEST = 'A';
    </script>
    {% if environment == 'production' %}
        <script type='text/javascript'>
            var interval = setInterval(function() {
                var test, bindFn;

                if (!window.ACTIVE_TEST) {
                    return;
                }

                // Because we need to bind some events before anything else, use this fn
                // http://stackoverflow.com/a/2641047
                $.fn.bindFirst = function(name, fn) {
                    // bind as you normally would
                    // don't want to miss out on any jQuery magic
                    this.on(name, fn);

                    // Thanks to a comment by @Martin, adding support for
                    // namespaced events too.
                    this.each(function() {
                        var handlers = $._data(this, 'events')[name.split('.')[0]];
                        // take out the handler we just inserted from the end
                        var handler = handlers.pop();
                        // move it at the beginning
                        handlers.splice(0, 0, handler);
                    });
                };

                bindFn = function() {
                    (new Image).src = window.TRACKING_PIXELS[test].click;
                };

                clearInterval(interval);
                test = window.ACTIVE_TEST;

                // Append click pixel
                if (/Android|iPhone|iPad|iPod/i.test(navigator.userAgent)) {
                    $('.tile').bindFirst('click', bindFn);
                } else {
                    // Why doesn't bindFirst work on desktop?
                    $('body').on('click', '.tile', bindFn);
                }


                // Append page view pixel
                (new Image).src = window.TRACKING_PIXELS[test].view;
            }, 1000);
        </script>
    {% endif %}
    <!-- Adobe Marketing Cloud Tag Loader Code
    Copyright 1996-2014 Adobe, Inc. All Rights Reserved
    More info available at http://www.adobe.com/solutions/digital-marketing.html -->
    <script type="text/javascript">//<![CDATA[
        var amc=amc||{};if(!amc.on){amc.on=amc.call=function(){}};
        document.write("<scr"+"ipt type=\"text/javascript\" src=\"//www.adobetag.com/d1/v2/ZDEtbmV3ZWdnLTEzOTM0LTMxMjMt/amc.js\"></sc"+"ript>");
        //]]>
    </script>
    <!-- End Adobe Marketing Cloud Tag Loader Code -->
    <title>{{ page.name|default:"Newegg" }}</title>
</head>
<body class="{% if tile %}stl{% endif %}">
    <div class='navbar'>
        <div class="container">
            <a href="http://www.newegg.com/" target="_blank">
                <img alt="Lenovo" class="logo" src="/static/light/lenovo/landingpage/default/images/logo.png" />
            </a>
        </div>
    </div>

    @@include('shared/campaign_body.html')

    <div>
        <script type="text/template" id="image_tile_template">
            <div class='relative'>
                <img class="focus" src="<%= obj.images[0].url %>" alt="<%= obj.caption %>" />
                <div class="overlay">
                    <div class="table">
                        <div class="cell">
                            <div class="bold">
                                Shop product
                            </div>
                            <div class="products">
                                <% if (obj['tagged-products'].length) { %>
                                    <div>
                                        <%- obj['tagged-products'][0].name %>
                                    </div>
                                <% } %>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <% if (App.option("debug", 0) > 1) { %>
                <span class="type"><%= obj["content-type"] %></span>
            <% } %>
        </script>

        <script type="text/template" id="product_buy_template">
            <% if (obj.neweggUrl) { %>
                <a class='button newegg' href='<%= obj.neweggUrl %>' target='_blank'>
                    Shop on Newegg
                    <div class="arrow"></div>
                </a>
            <% } else { %>
                <a class='button lenovo' href='<%= obj.url %>' target='_blank'>
                    Shop on Lenovo
                </a>
            <% } %>
        </script>

        <script type="text/template" id="product_preview_template">
            <div class="table">
                <div class='content-wrapper row'>
                    <% if (App.support.mobile()) { %>
                        <div class='cell info'>
                            <div class='title'></div>
                            <div class='price'></div>
                            <div class='buy'></div>
                        </div>
                    <% } %>
                    <div class='cell image-cell'>
                        <div class="gallery-main-image"></div>
                    </div>
                    <% if (obj.images.length > 1 && App.support.mobile()) { %>
                        <div class='cell'>
                            <div class='gallery-dots'></div>
                        </div>
                    <% } %>
                    <% if (!App.support.mobile()) { %>
                        <div class='cell info'>
                            <div class='title'></div>
                            <div class='price'></div>
                            <div class='buy'></div>
                            <div class="gallery<% if (obj.images.length < 2) { %> hide<% } %>"></div>
                        </div>
                    <% } %>
                </div>
            </div>
        </script>

        <script type="text/template" id="image_preview_template">
            <% if (obj['tagged-products'].length) { %>
                <% var product = obj['tagged-products'][0]; %>
                <div class="image-with-tagged-products">
                    <div class="table">
                        <div class="row">
                            <div class="cell desktop-only image-cell">
                                <img src="<%= obj.images[0].url %>" alt="image" class="image"/>
                                    <% if (obj['tagged-products'].length > 1 && obj.orientation === 'landscape') { %>
                                    <div class="landscape">
                                        <div class="stl-title">shop the family</div>
                                        <div class="stl-look">
                                            <% var related = obj['tagged-products']; %>
                                            <% for (var i = 0; i < related.length; i++) { %>
                                                <div class="stl-item" data-index="<%- i %>">
                                                    <img src="<%- related[i].images[0].url %>" />
                                                    <div class="name">
                                                        <%- related[i].title || related[i].name %>
                                                    </div>
                                                </div>
                                            <% } %>
                                        </div>
                                    </div>
                                <% } %>
                            </div>
                            <% if (obj['tagged-products'].length > 1 && obj.orientation !== 'landscape') { %>
                                <div class="cell desktop-only shop">
                                    <div class="stl-title">shop the family</div>
                                    <div class="stl-look">
                                        <% var related = obj['tagged-products']; %>
                                        <% for (var i = 0; i < related.length; i++) { %>
                                            <div class="stl-item" data-index="<%- i %>">
                                                <img src="<%- related[i].images[0].url %>" />
                                                <div class="name">
                                                    <%- related[i].title || related[i].name %>
                                                </div>
                                            </div>
                                        <% } %>
                                    </div>
                                </div>
                            <% } %>
                            <div class="cell mobile-only">
                                <img src="<%= obj.images[0].url %>" alt="image"/>
                            </div>
                            <div class="cell info">
                                <div class='title'></div>
                                <div class='price'></div>
                                <div class='buy'></div>
                                <div class="gallery-main-image"></div>
                                <div class='gallery-dots<% if (product.images.length < 2) { %> hide<% } %>'></div>
                            </div>
                            <% if (obj['tagged-products'].length > 1) { %>
                                <div class="cell mobile-only">
                                    <div class="stl-title">shop the family</div>
                                    <div class="stl-look">
                                        <% var related = obj['tagged-products'] %>
                                        <% for (var i = 0; i < related.length; i++) { %>
                                            <div class="stl-item" data-index="<%- i %>">
                                                <img src="<%- related[i].images[0].url %>" />
                                                <div class="name">
                                                    <%- related[i].title || related[i].name %>
                                                </div>
                                            </div>
                                        <% } %>
                                    </div>
                                </div>
                            <% } %>
                        </div>
                    </div>
                </div>
            <% } else { %>
                <div class="image-without-tagged-products">
                    <div class="table">
                        <div class="row">
                            <div class="cell">
                                <img src="<%= obj.images[0].url %>" alt="image" class="main-image" />
                            </div>
                            <div class="cell info">
                                <div class="title">
                                    Coming soon to Newegg!
                                </div>
                                <div class="buy">
                                    <a class='button newegg' href='http://www.newegg.com/' target='_blank'>
                                        Shop On Newegg
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            <% } %>
        </script>
    </div>

    <div class="container">
        <!-- .container is bootstrap magic, and has a viewport-dependent width. -->
        <div id="hero-area"></div>
        <div id="hero-sub-banner">
            {% if legal_copy %}
                <div class="legal us">
                    {{ legal_copy }}
                </div>
            {% endif %}
        </div>
        <div id="category-area"></div>
        <div id="discovery-area" class="discovery-area"></div>
        <div class="tile-sizer tile"></div>
        <div class="no-noscript loading"></div>
        <noscript>
            <!-- promotions to show when user does not have javascript.
             this is a 'we need javascript' message by default.
             -->
            <div class="alert alert-danger">
                <b>Oh no!</b> We need JavaScript enabled to show you this page.
            </div>
        </noscript>
    </div>

    <img src="{% url 'apps.tracking.views.pixel' %}"/>
    <div>
        @@include('shared/default_templates.html')
    </div>
    <script type="text/javascript" src="/static/light/lenovo/landingpage/default/scripts/main.js" async></script>

    <script id="sitecatalyst_stub" type="text/javascript">
        var s=new SC_Stub();
        s.tagContainerName="Neweggcom_s";

        /************* DO NOT ALTER ANYTHING BELOW THIS LINE ! **************/
        function SC_Stub(){var t=this,w=t.w=window;t.d=w.document;t._c='s_l';if(!w.s_c_il){w.s_c_il=[];w.s_c_in=0}t._il=w.s_c_il;t._in=w.s_c_in;t._il[t._in]=t;w.s_c_in++;t.fs=function(x,y){if(x&&y){var a=
        x.split(','),b=y.split(','),i,j;for(i=0;i<a.length;i++){for(j=0;j<b.length;j++)if(a[i]==b[j])return 1}}return 0};t.aa=function(a){var b=0,i;if(a){b=[];for(i=0;i<a.length;i++)b[i]=a[i]}return b};t.wl=[
        ];t.wq=[];t.createAsynchronousCustomTagHandler=function(o,f){var t=this,x,i;if(!f){f=o;o=0;x=t.w}else{if(!t.w[o])t.w[o]={};x=t.wl[o]=t.w[o]}if(typeof(f)!='object')f=[f];for(i=0;i<f.length;i++)if(!x[f[
        i]])x[f[i]]=new Function('var t=s_c_il['+t._in+'];t.wq[t.wq.length]={'+(o?'o:"'+o+'",':'')+'f:"'+f[i]+'",a:t.aa(arguments)}')};t.as=function(x){var y=[],i;for(i=1;i<x.length;i++)y[y.length]=x[i]
        return y};t.s=0;t.contextData={};t.retrieveLightData={};if(!w.s_giq)w.s_giq=[];t._gi=w.s_gi;w.s_gi=new Function('u','var t=s_c_il['+t._in+
        '],w=t.w,l=t._il,i,j,x,s;u=u.toLowerCase();if(l)for(j=0;j<2;j++)for(i=0;i<l.length;i++){s=l[i];x=s._c;if((!x||x=="s_c"||(j>0&&x=="s_l"))&&s.oun&&(s.oun==u||(s.fs&&s.sa&&s.fs(s.oun,u)))){'+
        'if(s.sa)s.sa(u);return s}}if(!t.oun){t.sa(u);return t}if(t._gi)return t._gi(u);s=new SC_Stub();s.tagContainerName="s_tca_"+w.s_giq.length;s.sa(u);w.s_giq[w.s_giq.length]=s;return s');t.sa=function(u)
        {var t=this;if(t.s)t.s.sa(u);t.un=u;if(!t.oun)t.oun=u;else if(!t.fs(t.oun,u))t.oun+=','+u};t.tq=[];t.track=t.t=function(vo){var t=this,m;if(t.s)return t.s.t(vo);if(!vo)vo={};for(m in t){if(m!='un'
        ||t.u!=t.un)vo[m]=t[m]}t.tq[t.tq.length]=vo;t.lnk=t.linkName=t.linkType='';return '';};t.trackLink=t.tl=function(o,u,n,vo){var t=this;if(t.s)return t.s.tl(o,u,v,vo);t.lnk=o;t.linkType=u;t.linkName=n
        return t.t(vo)};t.trackLight=function(p,ss,i,vo){var t=this;if(t.s)return t.s.trackLight(p,ss,i,vo);t.lightProfileID=p;t.lightStoreForSeconds=ss;t.lightIncrementBy=i;return t.t(vo)};t.lmq=[]
        t.loadModule=function(n,u,d){var t=this;if(t.s)return t.s.loadModule(n,u,d);t.lmq[t.lmq.length]={n:n,u:u,d:d};return 0};t.ml=[];t.mmq=[];t.mo=function(m,f){var t=this,i;t.ml[m]=t[m]={};if(f)
        for(i=0;i<f.length;i++)t[m][f[i]]=new Function('var t=s_c_il['+t._in+'];t.mmq[t.mmq.length]={m:"'+m+'",f:"'+f[i]+'",a:t.aa(arguments)}')};t.mo('Media',['open','play','stop','close','track']);t.mo(
        'Survey',['launch']);}; amc.call('getLoaderById', 0).publish('ontagload.sitecatalyst_stub', {id: 'sitecatalyst_stub',tag: amc.call('getById', 'sitecatalyst_stub')})
    </script>

    <script id="sitecatalyst" type="text/javascript" async="" defer="" src="//www.adobetag.com/d1/v2/ZDEtbmV3ZWdnLTEzOTM0LTMxMjMt/live/sitecatalyst.js"></script>

    <!-- SiteCatalyst -->
    <script type="text/javascript" language="javascript1.1">
        s.pageName='US_na_Lenevo/09262014';
        s.server='promotions';
        s.channel='Landingpage';
        s.prop1='browsing';
        s.prop11='US_na_Lenevo/09262014';
        s.prop23='MKT Promotion';
        s.prop19=Web.StateManager.Cookies.get(Web.StateManager.Cookies.Name.NVTC);
        s.prop24=Web.StateManager.Cookies.get(Web.StateManager.Cookies.Name.UTMA);

        /************* DO NOT ALTER ANYTHING BELOW THIS LINE ! **************/
        var s_code=s.t();if(s_code)document.write(s_code)
    </script>
</body>
</html>
